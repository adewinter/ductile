# Ductile

Are you tired of writing stuff down but forgetting _where_ you wrote it? Constantly switching to the new hotness in note taking apps but putting off migrating your notes to the new system? Don't want to deal with note taking apps as a concept because plain-text will do? This tool could be for you.

Ductile monitors _*all key presses*_ and stores those key presses in text files (in a folder you specify). Doesn't matter what you type of where you type it, the text will be saved. You can then hook up those text files to whatever text search/manipulation of your choosing should you ever want to go back and find something you wrote down. This tool is intended to run in the background and be left to run for as long as your machine is powered on.

Ductile was built as an experiment, based on the theory that saving all the text actually typed on a machine is trivial, in terms of storage requirement, and potentially useful (despite the saved raw keyboard entry being potentially janky as explained below).

## Use cases:

-   Ever lost a long form response that you wrote into a text box in a browser, because the submit timed out and the back button didn't save your input? Not any more. You'll be able to find what you typed out in the blob store generated by Ductile.
-   Need to take notes _immediately_ and don't have time to think of a good file name much less where to save it? No problem: just open up notepad and start typing. If you forget about the note and then proceed to restart/lose power to your machine, your notes will still be saved.
-   If you generally believe the act of writing something down is more important than actually saving the writing somewhere, but sometimes do actully want to look up something you wrote before, this tool may work for you.
-   Have you ever lost terminal command history because you haven't configured `HIST_OPTS`? Well, the stuff saved by Ductile will be better than nothing!

## Caveats/Warnings/Disclaimer

The following caveats apply:

-   Be careful with passwords! Consider this a great opportunity to switch to using a password manager if you haven't already. Using a password manager means you're not typing out your passwords and therefore this (and other, more malicous) keyloggers won't record them.
-   If you heavily rely on keyboard shortcuts that cause the cursor to jump around (e.g. ctrl+arrow-keys or ctrl+backspace), expect the text to be mangled. If there is interest, I may implement a way to deal with these kinds of jumps but I have a suspicion that that particular rabbit hole is very deep.
-   Since text might be mangled (see above) you should: either make your peace with sometimes janky text, or not rely on this tool for high fidelity/work sensitive document generation more appropriate for an actual text editor. Consider this a catch-all bucket for _all_ of your random musings which could later be processed into something useful. It is a back-stop for your regular workflows.
-   This is a tool I hammered out in python in my spare time for fun. Don't run it in production or rely on it for some critical process/workflow. Something could cause Ductile to crash and you may not realize it [see future plans section below].

## How are the text files organized/How does this thing work?

Basically: Anything you type is stored in a 'blob'. Each file in the data folder represents a blob. File names take the following format `[process_name]__[window_title_hash].md`, with all files stored in the `data/` dir by default but you can specify some other directory by using the command line argument `--data-folder` [see usage section below].

`process_name` is the name of the process responsible for the window that you are typing in, as reported by your operating system (e.g. "slack.exe").

`window_title_hash` is an MD5 hash of the title of the window you are actively typing in. The title has some mild processing applied (e.g. removing non-ascii characters and spurious whitespace) to keep the hash consistent in apps that like to add status icons to the title depending on what you're doing or file state. Window titles often change based on what you're doing in the window. For example the format for Slack window titles is roughly `Slack | channel_name | organization_name`. With the way hashing/blob file naming works, you should therefore automatically end up with a blob for every channel you type in, in the case of slack. Similarly, for example, in Sublime text, a new blob is generated for every tab I type in.

There are some config values you can tweak. Take a look in the `python/config.py` file. Some things you can alter include saving "compound" keys to blobs (so you could record stuff like [ctrl+s] instead of that chord/compound just being ignored by Ductile), and how window titles are processed/cleaned up before a hash is generated for them.

## Install/Setup

NOTE: Currently only supports Windows but other operating systems should be real trivial to make happen if anyone ever requests it (or I get un-lazy).

Prereqs: Python 3.x (ideally 3.10) and pipenv

-   Clone this repo
-   run `pipenv install`

## Usage

From the root of this repo, in a pipenv shell run:

```
python python/main.py
```

(or `pipenv run python python/main.py` might also work if you're not already in the pipenv shell)

If you would like to specify a different data folder/location (default is `data/` within in this repo):

```
python python/main.py --data-folder path/to/data/dir
```

## Future plans

-   Store a mapping of the blob filenames (Where all the typing is stored) in either a dedicated index file or in a sqlite DB, depending on what's more useful/easier
-   Somehow convert this thing into a binary so you don't have to fiddle with installing python/pipenv and can easily run it as a service/daemon that can be restarted as needed
-   Sync functionality so it'll auto backup to your cloud provider of choice (nextcloud, dropbox, etc)
-   Use a better file extension for the blob files. .MD just makes no sense (mostly because there's a lot of jank if you use text shortcut keys like ctrl+del)
-   Deal with text shortcut keys (like ctrl+del or ctrl+arrow-key) so there's less jank in the saved files. Might be straightforward if we limit ourselves to ones that purely move the cursor around and not the more complex moves that do things like select a block of text (e.g. ctrl+shift+arrow-key, especially if you then hit delete to nuke the highlighted text).
-   Build a tool on top of the raw blob storage, so you can start e.g. extracting, finding, tagging stuff for later use. Don't need to open your note-taking app to save a todo, start typing into literally any input box and slap a #todo on there. Done.
-   Consider automated processes that can be triggered off of the above layer. E.g. If we write a command phrase like #todo it'll automatically email the surrounding text you wrote to a specific address, or send the data to IFTTT or some other automation pipeline. Automatically add #reminders to your calendar. Start treating your keyboard like an actuation device. Type #@!LIGHTSOFF and your smart-home lights turn off.
